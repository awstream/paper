\section{Introduction}

%% Background
In this paper, we study streaming analytics in the wide area. The emerging class
of Internet of Things (IoT) applications are generating huge volumes of data at
the edge. Large cities such as New York, Beijing and Seattle are deploying
millions of cameras for traffic control~\cite{london.surveillance,skynet}. In
addition to videos, industrial monitorings also benefit from real-time stream
processing. Buildings, for example, are increasingly equiped with a wide variety
of sensors to improve building energy use, occupant comfort, reliability and
maintenance~\cite{krioukov2012building}.

While existing stream processing systems (such as Spark
Streaming~\cite{zaharia2013discretized}, Storm~\cite{toshniwal2014storm}) and
specialized analytical engines (VideoStorm~\cite{zhang2017live}) are capable of
handling large streams of data. They assume all the data are in a central
location. In our wide-area streaming analytics, data collection sites differ
from data processing sites.

Backhauling all the data across the wide-area, however, is neither possible nor
efficient. The Internet's available bandwidth is scarce and varying; and the
capacity growth rate is slower than the data growth rate. On the efficiency
side, raw data often contains large and less relevant details that can be pruned
or compressed. Edge could improve efficiency (such as GDA pushes queries out;
cloudlet etc). However, we still need data transmission for cloud off-loading or
aggregation purpose.

Transport protocols, without knowledge of the running applications, handle the
insufficient network resources with one specific strategy. Applications based on
TCP ensures a reliable delivery of the data but the backlogged data will
increase application latency. Applications based on UDP could minimize latency
by sending packets as fast as possible, the uncontrolled packet loss along the
network may devastate the application. Conceptually, this is a trade-off space
between data freshness and data fidelity; and existing protocols operate in
either extreme case. Allowing exploration of such a trade-off space is crucial
for a resilient execution of wide-area streaming applications.

Adapting data transmission to available bandwidth is far from trivial. Manual
policy or application-specific solutions that doesn't generalize. Previous work
(JetStream~\cite{rabkin2014aggregation}) explored the direction of reducing
application's demand with degradation, but it relies on developers' manual
policy, which lacks precision and faces scalability issue.  There are also
application-specific optimizations; but they do not generalize. For example,
adaptive video streaming~\cite{yin2015control} is a well-studied topic but many
adaptations aim at human consumption, focusing on Quality of Experience
(QoE). This limits the adaptation space e.g. maintain 25FPS.

In this work, we present \sysname{}, which aims to empower developers with an
easy-to-use framework for wide-area streaming analytics. The goal is to
maximizing application accuracy under the constrain of available bandwidth. Key
to \sysname{} is a set of \maybe{} APIs. Developers use these APIs to construct
applications with \textit{structured adaptation}, i.e., application's execution
is parameterized with configurations that vary the data rate and application
accuracy.

Each \maybe{} operator takes a list of knobs and a function that transforms the
data item. \sysname{} also has a library of built-in functions for common data
types, e.g. images. Developers are not assumed to be expert in the particular
application domain. Even if they only have intuitions about how a particular
parameter would affect the application, they can embed the intuition with
\maybe{} operators.

\sysname{} then profiles the application with a user-supplied training dataset
and measures bandwidth demand and application accuracy automatically exploring
the parameter space. Because profiling can be expensive, we speed up the process
with parallelism. For some applications, online profiling is needed to alleviate
\textit{model drift}, where the previously learned profile doesn't match the
current data distribution. \sysname{} supports online profiling; in addition, we
use the offline profiling information to further speed up the online profiling
phase with degradation-aware scheduling and partial profiling.

The profile is used at runtime for two folds. As an individual application,
\sysname{} adapts the application execution according to estimated bottle-neck
bandwidth to avoid queueing, leading to bounded latency. Our congestion control
employs a novel probe-based rate adaptation that allows fine-tuning egress data
rate. When multiple streams share the same bottle-neck link, our system is able
to allocate bandwith resources to maxmize the minimal accuracy (a different
fairness goal from equal bandwidth allocation).

Using \sysname{}, we've built three streaming applications: pedestrian detection
(PD), augmented reality (AR) and a distributed Top-k analysis. We use real-world
data to evaluate these applications for our profiling tool and runtime
systems. We also study in depth of the online profiling for AR.

Our evaluation shows that \sysname{} generates Pareto-optimal profiles with
precision and fine granularity for all three applications. Our parallel and
partial profiling enables fast online profiling with about 10\% GPU time. At
runtime, \sysname{} applications achieve sub-second latency and little accuracy
drop. \sysname{} profiles allow equal-accuracy bandwidth allocation among
multiple streams.

In summary, this paper makes the following contributions:

\begin{itemize}[leftmargin=16pt]
\item We study in depth of wide-area streaming applications in the case of
  network resource variation.
\item We propose a novel set of APIs to allow for structured adaptation: they
  require minimal developer efforts while being precise with automatic
  profiling.
\item We propose a new congestion control scheme that adapts the application
  data to available bandwidth, with a goal of minimizing the latency.
\item We implement a prototype system.
\item We build three real-world applications and evaluate their behavior
  under different scenarios.
\end{itemize}

\newpage

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "sosp17"
%%% End:
