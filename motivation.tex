\begin{figure}
  \centering
  \includegraphics[width=.9\linewidth]{figures/aws-variation.pdf}
  \caption{Bandwidth variations throughout the day between Amazon EC2 sites
    (from Ireland to California).}
  \label{fig:bw}
\end{figure}

\begin{figure*}
  \centering
  \includegraphics[width=0.95\linewidth]{figures/motiv-app-specific.pdf}
  \caption{The measured bandwidth and application accuracy for two video analytics applications.
  (1) Different degradation strategies have different impacts on accuracy, e.g., degrading frame rate in (a) vs.\,degrading resolution in (b).
  (2) The same degradation strategy has different impacts on different applications, e.g., degrading frame rates works well for stationary camera (a), but not well for mobile camera (e). (c-g) shows example measurement frames.}
  \label{fig:app-specific}
\end{figure*}

\section{Motivation}
\label{sec:motivation}

In this section, we examine the gap between high application demands and limited
wide-area bandwidth. We then show that neither manual policies nor
application-specific optimizations solve the problem.

\subsection{Wide-area Streaming Applications}
\label{sec:wide-area-streaming}

\paraf{Video Surveillance.} We envisage a city-wide monitoring system that
aggregates camera feeds---from stationary ground cameras and moving aerial
vehicles---and analyzes video streams in real-time for surveillance, anomaly
detection or business intelligence~\cite{oh2011large}. Traditionally, video
analysis has relied on humans, but recent advances in computer vision and deep
learning have dramatically increased accuracy for automatic visual scene analysis,
such as pedestrian detection~\cite{dollar2012pedestrian}, vehicle
tracking~\cite{coifman1998real}, an facial recognition to locate people of
interest~\cite{parkhi2015deep, Lu:2015:SHF:2888116.2888245}. While some
surveillance networks use dedicated links, an increasing number of surveillance
systems, such as Dropcam~\cite{dropcam} and Vigil~\cite{zhang2015design}, use
the public Internet and wireless links to reduce the cost of deployment and
management.

% \para{High-frequency IoT Sensors:} Although environmental sensors used to be
% slow and not data-intensive~\cite{atzori2010internet}, increasingly,
% high-frequency, high-precision sensors are deployed. For example, uPMUs
% monitor the electrical grid with a network of 1000 devices; each produces 12
% streams of 120 Hz high-precision values accurate to 100 ns. This amounts to
% 1.4 million points per second~\cite{andersen2016btrdb}.

\para{Infrastructure Monitoring.} Large organizations today are managing
10--100s of data centers (DCs) and edge clusters
worldwide~\cite{calder2013mapping}. This geo-distributed infrastructure
continuously produces large volumes of data such as data access logs, server
monitoring logs, and performance counters~\cite{pu2015low,
  alspaugh2014analyzing, vulimiri2015global}. While most log analysis today runs
in batch mode on a daily basis, there is a trend towards analyzing logs in real
time for rapid optimization~\cite{rabkin2014aggregation}. For example, CDNs can
improve the overall efficiency by optimizing data placement if the access logs
can be processed in real time.

%% ~\cite{xu2009detecting} We generated the HDFS logs by setting up a Hadoop
%% cluster on 203 EC2 nodes and running sample Hadoop map-reduce jobs for 48
%% hours, generating and processing over 200 TB of random data. We collected
%% over 24 million lines of logs from HDFS.

% We consider the practical issues with deploying these applications in the
% wide-area. Our stand is that these applications face a bigger network
% challenge.  Data generated from the edge often fail to be delivered to the
% processing site because of the scarce and variable bandwidth capacity in the
% wide-area. Once they arrive, existing stream processing systems can easily
% manage a large cluster and perform data analytics at real-time.

\subsection{Wide-area Bandwidth Characteristics}
\label{sec:wide-area-bandwidth}

WAN bandwidth is insufficient and costly, as demonstrated by recent WAN-aware
systems~\cite{pu2015low, vulimiri2015global, vulimiri2015wananlytics,
  hsieh17gaia}. Using Amazon EC2 as a case study, the WAN bandwidth capacity is
15x smaller than their LAN bandwidth on average, and up to 60x smaller in the
worst case~\cite{hsieh17gaia}. In terms of pricing, as of April 2017, the
average WAN bandwidth cost is up to 38x of the cost of renting two
machines~\cite{amazon2017pricing, hsieh17gaia}.

In addition to the scarcity and cost, the large variability of WAN bandwidth
also affects streaming workloads. We conducted a day-long measurement using
iPerf~\cite{iperf3} to measure pair-wise bandwidth between four Amazon EC2
sites. The results show large variance in all pairs---\autoref{fig:bw} is one
such pair. There are occasions when available bandwidth is below 25\% of the
maximum bandwidth.

The back-haul links between EC2 sites are better---if not at least
representative---in comparison to general WAN links. Similar scarcity and
variations have been reported in wireless networks~\cite{biswas2015large},
broadband access networks~\cite{grover2013peeking, sundaresan2014bismark} and
cellular networks~\cite{nikravesh2014mobile}.

\subsection{The Case for a System Approach}
\label{sec:making-case-sys-approach}

To address the bandwidth limits, existing solutions include manual policies and
application-specific solutions. We discuss their drawbacks to make the case for
a system approach.

\para{Manual polices are sub-optimal.} While existing systems such as
JetStream~\cite{rabkin2014aggregation} and DASH~\cite{sodagar2011mpeg} allow
adaptation, they require developers to write manual policies. We illustrate the
problems with manual policies using an example~\cite{rabkin2014aggregation}:
\textit{if bandwidth is insufficient, switch to sending images at 75\% fidelity,
  then 50\% if there still isn't enough bandwidth. Beyond that point, reduce the
  frame rate, but keep the image fidelity.}

First, this policy is not accurate.
Developers write such rules based on heuristics and
don't back them up with measurements. Images with 75\% fidelity do not
necessarily lead to 75\% application accuracy. In terms of bandwidth, naively
one would think that reducing the frame rate by half will also half the data
rate. But if video encoding such as H.264~\cite{richardson2011h} is used, a reduction in frame rate increases the inter-frame difference, creating
larger P-frames. \hyperref[fig:app-specific]{Fig.~3e} shows that by reducing the
frame rate to one-third (from \(30~\text{FPS}\) to \(10~\text{FPS}\)), the bandwidth demand is still more than 50\%.

Second, it is not scalable to specify rules in this way. When the policy involves multiple dimensions
or developers desire a fine-grain control, the policy will end up with too many
rules.  Writing such rules manually is a tedious and error-prone process.

Lastly, this abstraction is too low-level. It forces developers to study and measure the
impact of individual operations, prohibiting its wide adoption in practice.

\para{Application-specific solutions don't generalize.} Because each application
has a different performance metric, relies on different features, and targets
different data distributions, a fine-tuned policy for one application will often work
poorly for others.

Analytical applications have their own goals, entailing different optimization metrics and
different algorithms.
%
%For instance, traditional video streaming focuses on end-users'
%experience~\cite{yin2015control, michalos2012dynamic, pantos2016http}. If we
%transfer their techniques to %machine-based video analytics, the %system maintains
%an unnecessarily-high frame rate.
%
In video analytics, for instance,
object detection algorithms depend on the edge
information~\cite{canny1986computational, lowe2004distinctive, viola2001rapid}
while object tracking~\cite{allen2004object} works best when the inter-frame
difference is small. The former is sensitive to resolution changes while the
latter frame rate changes.

Similar applications face different data distributions. Compare the stationary
camera detecting pedestrians with the mobile camera recognizing objects
(\autoref{fig:app-specific}). In the former case, when we take the pedestrians'
walking speed into consideration, a high frame rate is not necessary. But
high-resolution images are crucial as surveillance cameras are far from the
targets. In the latter case, mobile cameras move. Reducing the frame rate
introduces significant errors.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "awstream"
%%% End:
